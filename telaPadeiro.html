<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <title>Tela Padeiro</title>
    <style>
      body {
        margin: 0;
        height: 100vh;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        grid-auto-rows: 1fr;
        gap: 40px;
        padding: 40px;
        background: #ffffff;
        box-sizing: border-box;
        font-family: Arial, sans-serif;
      }
      button {
        width: 100%;
        height: 100%;
        border: none;
        border-radius: 15px;
        font-weight: bold;
        font-size: 1.2rem;
        cursor: pointer;
        transition: transform 0.2s;
      }
      button:hover:enabled {
        transform: scale(1.05);
      }
      button:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }
    </style>
  </head>
  <body>
    <script>
      const apiUrl = "http://localhost:8080";

      const cores = [
        { bg: "#d4ff4d", fg: "black" },
        { bg: "#4d94ff", fg: "white" },
        { bg: "#00441e", fg: "white" },
        { bg: "#800020", fg: "white" },
        { bg: "#4dffd2", fg: "black" },
        { bg: "#ff944d", fg: "white" },
        { bg: "#4d4dff", fg: "white" },
        { bg: "#ff4df3", fg: "white" },
        { bg: "#001f54", fg: "white" },
        { bg: "#ffd454", fg: "black" },
        { bg: "#000000", fg: "white" },
        { bg: "#4dffff", fg: "black" },
        { bg: "#4dd2ff", fg: "black" },
        { bg: "#e00000", fg: "white" },
        { bg: "#00d100", fg: "white" },
      ];

      async function carregarPaes() {
        const res = await fetch(`${apiUrl}/paes`);
        const paes = await res.json();

        cores.forEach((cor, i) => {
          const btn = document.createElement("button");
          btn.style.background = cor.bg;
          btn.style.color = cor.fg;

          if (i < paes.length) {
            const pao = paes[i];
            btn.textContent = pao.tipo;

            btn.addEventListener("click", async () => {
              const resp = await fetch(`${apiUrl}/fornadas/${pao.id}`, {
                method: "POST",
              });
              if (resp.ok) {
                alert(`Fornada do pão "${pao.tipo}" cadastrada!`);
              } else {
                alert("Erro ao cadastrar fornada");
              }
            });
          } else {
            btn.textContent = "—";
            btn.disabled = true;
          }

          document.body.appendChild(btn);
        });
      }

      carregarPaes();
    </script>
  </body>
</html>
